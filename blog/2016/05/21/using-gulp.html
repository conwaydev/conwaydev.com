<!doctype html> <html lang="en-US"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Using Gulp in a Jekyll Project</title> <meta name="description" content="A brief look at using Gulp inside of a Jekyll project to manage your asset building."> <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" /> <link rel="canonical" href="http://conwaydev.com/blog/2016/05/21/using-gulp.html"> <style>/*! * Bootstrap Reboot v4.1.2 (https://getbootstrap.com/) * Copyright 2011-2018 The Bootstrap Authors * Copyright 2011-2018 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,:after,:before{-webkit-box-sizing:border-box;box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:transparent}@-ms-viewport{width:device-width}article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:1rem;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus{outline:0!important}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}abbr[data-original-title],abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;border-bottom:0}address{font-style:normal;line-height:inherit}address,dl,ol,ul{margin-bottom:1rem}dl,ol,ul{margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}dfn{font-style:italic}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#007bff;text-decoration:none;background-color:transparent;-webkit-text-decoration-skip:objects}a:hover{color:#0056b3;text-decoration:underline}a:not([href]):not([tabindex]),a:not([href]):not([tabindex]):focus,a:not([href]):not([tabindex]):hover{color:inherit;text-decoration:none}a:not([href]):not([tabindex]):focus{outline:0}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;-ms-overflow-style:scrollbar}figure{margin:0 0 1rem}img{border-style:none}img,svg:not(:root){vertical-align:middle}svg:not(:root){overflow:hidden}table{border-collapse:collapse}caption{padding-top:.75rem;padding-bottom:.75rem;color:#6c757d;text-align:left;caption-side:bottom}th{text-align:inherit}label{display:inline-block;margin-bottom:.5rem}button{border-radius:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}textarea{overflow:auto;resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{display:block;width:100%;max-width:100%;padding:0;margin-bottom:.5rem;font-size:1.5rem;line-height:inherit;color:inherit;white-space:normal}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}summary{display:list-item;cursor:pointer}template{display:none}[hidden]{display:none!important}html{font-size:1rem}@media (min-width:52rem){html{font-size:1rem}}body{line-height:1.45}p{margin-bottom:1.3em}h1,h2,h3,h4{margin:1.414em 0 .5em;font-weight:inherit;line-height:1.2}h1{font-size:2.369rem;margin-top:0}@media (min-width:52rem){h1{font-size:3.157rem}}h2{font-size:1.777rem}@media (min-width:52rem){h2{font-size:2.369rem}}h3{font-size:1.777rem}h4{font-size:1.333em}.font_small,small{font-size:.75rem}ol,ul{padding-left:1rem}*,:after,:before{-webkit-box-sizing:inherit;box-sizing:inherit;padding:0;margin:0}html{-webkit-box-sizing:border-box;box-sizing:border-box}@media (min-width:60em){html{font-size:18px}}body{font-family:Andale Mono,PT Mono,monospace;font-display:swap;font-weight:400;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}html.wf-active body{font-family:Roboto Mono,Andale Mono,PT Mono,monospace}h1,h2,h3,h4{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-weight:600}html.wf-active h1,html.wf-active h2,html.wf-active h3,html.wf-active h4{font-family:Poppins,sans-serif}strong{font-weight:600}figure{margin:0}img,svg{display:block;height:auto;max-width:100%}.image--bordered{border-radius:3px;border:1px solid #fff}a{color:inherit;word-break:break-word;-webkit-transition:color .25s,background .3s;transition:color .25s,background .3s;text-decoration:underline;-webkit-text-decoration-skip:ink;text-decoration-skip:ink}a svg{-webkit-transition:fill .25s;transition:fill .25s}a img{-webkit-transition:opacity .25s;transition:opacity .25s}pre{display:block;padding:1rem;overflow:auto;color:#f1c40f;background:#474b4d}.scr-text{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);color:inherit}.twitter-timeline{display:none;width:100%!important;height:100%!important}@media (min-width:52rem){.twitter-timeline{display:block}}.button{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-weight:600;color:#fff;text-decoration:none;background:#2574a9;padding:.5rem 1rem}html.wf-active .button{font-family:Poppins,sans-serif}.button:hover{color:#fff;background:#2c3e50}.button--white{color:#2c3e50;background:#fff}.button--white:hover{color:#2c3e50;background:#f1c40f}.header{padding:1rem 0}.header a{color:#2c3e50}.header a:hover{color:#2574a9}.header__title{display:inline-block;font-size:.75rem}.header__title:hover svg{fill:#f1c40f}.header__title svg{display:none;vertical-align:middle;fill:#2574a9}@media (min-width:52rem){.header__title svg{display:inline-block;width:20px;height:20px}}.footer{background:#2c3e50;color:#fff;padding:1rem 0}.footer p{margin:0}.footer__info{background:#2574a9;padding:.5rem;font-size:.75rem}.footer__social{display:-webkit-box;display:-ms-flexbox;display:flex}@media (min-width:52rem){.footer__social>:first-child{margin-left:auto}}.footer__social a{display:inline-block}.footer__social a .scr-text{color:#c8f7c5}.footer__social a svg{fill:#f1c40f;display:block;height:30px;width:30px}@media (min-width:52rem){.footer__social a svg{height:40px;width:40px}}.footer__social a:focus svg,.footer__social a:hover svg{fill:#fff}.wrapper{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.row{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.row--center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.column{position:relative;width:100%;min-height:1px;padding-right:15px;padding-left:15px}.column--half{-webkit-box-flex:0;-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.column--third{-webkit-box-flex:0;-ms-flex:0 0 33.33333%;flex:0 0 33.33333%;max-width:33.33333%}@media (min-width:60em){.column--split{-webkit-box-flex:0;-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}}@media (min-width:60em){.column--reverse{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.column--reverse+.column{-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0}}.section{overflow:hidden}.section h2{margin-top:0}.section--gray{background:#f1f4f3}.section--dark{background:#474b4d}.section--navy{color:#fff;background:#2c3e50}.section--padded{padding-top:2rem;padding-bottom:2rem}@media (min-width:52rem){.section--padded{padding-top:4rem;padding-bottom:4rem}}.intro{background:#f1c40f;color:#010a15}.intro__description{padding-top:2rem;padding-bottom:2rem}@media (min-width:52rem){.intro__description{padding-top:4rem}}.intro__title{color:#2c3e50}.posts>a{display:block}.posts>a+a{margin-top:2rem}.post a{color:#2574a9}.post a:hover,.post h2,.post h3,.post h4{color:#2c3e50}.post figure,.post h2,.post h3,.post h4,.post pre{margin-bottom:1.3rem}.post blockquote{padding-left:1.3rem;color:#474b4d;border-left:3px solid #474b4d}.post__date{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-weight:600;position:relative;display:inline-block;padding-top:.25rem;font-size:.75rem;color:#2c3e50;border-top:3px solid #2574a9;margin-bottom:1rem}html.wf-active .post__date{font-family:Poppins,sans-serif}.post__title{margin-top:0;margin-bottom:0;font-size:1.777rem;color:#2574a9}.post__title a{display:block}@media (min-width:52rem){.post__title--large{font-size:2.369rem}}.post__content,.post__content *+blockquote,.post__content *+p{margin-top:1.3rem}.post__content iframe{display:block;max-width:100%;margin:2.6rem auto}.Project__image{display:none}@media (min-width:52rem){.Project__image{display:block;margin:1rem 0}.Project__image img{border-radius:50%}}.Project__title{font-size:1.777rem;color:inherit}.Project__description{font-size:.75rem}</style> </head> <body> <div style="display: none;"><?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="-10 -10 532 532" id="codepen"><path d="M427 201.9c-.6-4.2-2.9-8-6.4-10.3L264.2 87.3c-4.9-3.3-11.4-3.3-16.3 0L91.4 191.6c-4 2.7-6.5 7.4-6.5 12.2v104.3c0 4.8 2.5 9.6 6.5 12.2l156.4 104.3c4.9 3.3 11.4 3.3 16.3 0l156.5-104.2c4-2.6 6.6-7.4 6.6-12.2V203.9c-.1-.7-.1-1.3-.2-2 0-.2.1.7 0 0zm-156.3-74.8l115.2 76.8-51.5 34.4-63.8-42.7v-68.5zm-29.4 0v68.6l-63.8 42.7L126 204l115.3-76.9zm-127 104.3l36.8 24.6-36.8 24.6v-49.2zm127 153.5l-115.2-76.8 51.5-34.4 63.8 42.6v68.6zm14.7-94.1L204 256l52-34.8 52 34.8-52 34.8zm14.7 94.1v-68.6l63.8-42.6 51.5 34.4-115.3 76.8zm127-104.3L360.9 256l36.8-24.6v49.2z"/></symbol><symbol viewBox="-10 -10 532 532" id="github"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9v-34.7c-51.7 11.3-62.5-21.9-62.5-21.9-8.4-21.5-20.6-27.2-20.6-27.2-16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9-41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9-1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4v51c0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4 0-102.5-83.3-185.7-185.9-185.7z"/></symbol><symbol viewBox="-10 -10 532 532" id="linkedin"><path d="M186.4 142.4c0 19-15.3 34.5-34.2 34.5-18.9 0-34.2-15.4-34.2-34.5 0-19 15.3-34.5 34.2-34.5 18.9 0 34.2 15.5 34.2 34.5zm-5 58.9h-57.8v186.8h57.8V201.3zm92.4 0h-55.4v186.8h55.4v-98c0-26.3 12.1-41.9 35.2-41.9 21.3 0 31.5 15 31.5 41.9v98H398V269.8c0-50-28.3-74.2-68-74.2-39.6 0-56.3 30.9-56.3 30.9v-25.2h.1z"/></symbol><symbol viewBox="-10 -10 194 192" id="logo" xmlns="http://www.w3.org/2000/svg"><path d="M0 0v172c47.5 0 86-38.5 86-86V0H0zm88 86c0 47.5 38.5 86 86 86V0c-47.5 0-86 38.5-86 86z"/></symbol><symbol viewBox="-10 -10 532 532" id="message"><path d="M101.3 141.6v228.9h309.5V141.6H101.3zm274.4 26.2L256 259.3l-119.6-91.5h239.3zm-248.1 26.3l64.1 49.1-64.1 64.1V194.1zm.2 150.1l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7H127.8zm256.6-36.4L320 243.4l64.4-49.3v113.7z"/></symbol><symbol viewBox="-10 -10 532 532" id="twitter"><path d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36-12.6 7.5-26.5 12.9-41.3 15.8C357.6 146 340.7 138 322 138c-42 0-72.9 39.2-63.4 79.9-54.1-2.7-102.1-28.6-134.2-68-17 29.2-8.8 67.5 20.1 86.9-10.7-.3-20.7-3.3-29.5-8.1-.7 30.2 20.9 58.4 52.2 64.6-9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2-27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6 12.9-9.1 23.9-20.5 32.6-33.6z"/></symbol></svg></div> <header class="header" role="banner"> <div class="wrapper"> <div class="row"> <div class="column"> <a class="header__title" href="/"> <svg> <title>Justin Conway</title> <use xlink:href="#logo"></use> </svg> Justin Conway • Chicago-based Front End Developer </a> </div> </div> </div> </header> <section class="section section--padded section--gray"> <div class="wrapper"> <div class="row"> <div class="column column--split" style="margin: 0 auto;"> <article class="post"> <div class="post__date"> <time datetime="2016-05-21 03:50:24 +0000"> May 21, 2016 </time> </div> <h1 class="post__title post__title--large"> Using Gulp in a Jekyll Project </h1> <div class="post__content"> <p>Even though I’m trying not to rely on JS build systems as much anymore and rather use plain npm scripts, I have to say I still love them. They absolutely changed my life when I started using them. Today I’m going to talk about using Gulp inside of Jekyll. Now Jekyll has a really useful server inside itself, but I prefer being able to control a little more and gulp gives me that ability.</p> <h4 id="what-is-gulp">What is gulp?</h4> <p><img src="/assets/img/gulp.jpg" alt="gulp" /></p> <p>From https://github.com/gulpjs/gulp it is described as:</p> <ul> <li>Automation - gulp is a toolkit that helps you automate painful or time-consuming tasks in your development workflow.</li> <li>Platform-agnostic - Integrations are built into all major IDEs and people are using gulp with PHP, .NET, Node.js, Java, and other platforms.</li> <li>Strong Ecosystem - Use npm modules to do anything you want + over 2000 curated plugins for streaming file transformations</li> <li>Simple - By providing only a minimal API surface, gulp is easy to learn and simple to use</li> </ul> <p>I like to use gulp to compile and concatenate my assets, but there is so much you can do with it. The first thing you’re going to want to do is create your package.json file. I find the easiest way is to <code class="highlighter-rouge">npm init</code>. Once you’ve generated that you can go ahead and start installing our dependencies we’re going to need.</p> <div class="highlighter-rouge"><pre class="highlight"><code>npm install gulp gulp-sass browser-sync gulp-autoprefixer gulp-plumber --save-dev
</code></pre></div> <p>Then you’re going to create a file called <code class="highlighter-rouge">gulpfile.js</code> and paste this code in there.</p> <div class="highlighter-rouge"><pre class="highlight"><code>var gulp = require('gulp');
var sass = require('gulp-sass');
var browserSync = require('browser-sync');
var prefix = require('gulp-autoprefixer');
var minify = require('gulp-clean-css');
var plumber = require('gulp-plumber');
var cp = require('child_process');

gulp.task('jekyll-build', function (done) {
    return cp.spawn('jekyll' , ['build'], {stdio: 'inherit'})
        .on('close', done);
});

gulp.task('jekyll-rebuild', ['jekyll-build'], function () {
    browserSync.reload();
});

gulp.task('browser-sync', ['sass', 'jekyll-build'], function() {
    browserSync({
        server: {
            baseDir: '_site'
        }
    });
});

gulp.task('sass', function(){
    return gulp.src('_sass/main.scss')
        .pipe(sass())
        .pipe(prefix('last 2 versions'))
        .pipe(minify())
        .pipe(gulp.dest('_site/css'))
        .pipe(browserSync.reload({stream:true}))
        .pipe(gulp.dest('css'))
        .pipe(plumber())
});

gulp.task('watch', function () {
    gulp.watch(['*.scss', 'css/*.scss', '_sass/**/*.scss'], ['sass', 'jekyll-rebuild']);
    gulp.watch(['*.html', '_layouts/*.html', '_includes/*.html', '_posts/*'], ['jekyll-rebuild']);
});

gulp.task('default', ['browser-sync', 'watch']);

</code></pre></div> <p>You can see that what we’re doing is instead of letting <code class="highlighter-rouge">jekyll serve</code> handle the SCSS we are just compiling it ourselves then running <code class="highlighter-rouge">jekyll rebuild</code>. So once you have your <code class="highlighter-rouge">gulpfile.js</code> filled with this all you need to do is run <code class="highlighter-rouge">gulp</code> and it will automatically spin up a live server and minify your SCSS. Neat!</p> </div> </article> </div> </div> </div> </section> <footer class="footer" role="contentinfo"> <div class="wrapper"> <div class="footer__info"> <div class="row row--center"> <div class="column column--split"> <p class="footer__copy"> &copy; 2018 Justin Conway </p> </div> <div class="column column--split"> <div class="footer__social"> <a href="https://twitter.com/conwaydev" title="Twitter"> <svg> <use xlink:href="#twitter"></use> </svg> </a> <a href="https://github.com/conwaydev/" title="GitHub"> <svg> <use xlink:href="#github"></use> </svg> </a> <a href="http://codepen.io/conwaydev/" title="CodePen"> <svg> <use xlink:href="#codepen"></use> </svg> </a> <a href="https://www.linkedin.com/in/justin-conway-a2260a94" title="LinkedIn"> <svg> <use xlink:href="#linkedin"></use> </svg> </a> <a href="mailto:justin@conwaydev.com" title="Email"> <svg> <use xlink:href="#message"></use> </svg> </a> </div> </div> </div> </div> </div> </footer> <script async src="/js/index.min.js"></script> </body> </html>
